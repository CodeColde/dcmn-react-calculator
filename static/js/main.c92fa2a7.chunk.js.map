{"version":3,"sources":["components/Key.js","components/KeyWrapper.js","components/DisplayFormatter.js","components/Display.js","assets/pexels-photo-192136.jpeg","components/Background.js","hooks/useCalculate.js","utils/calculateValue.js","App.js","index.js"],"names":["Key","children","onClick","span","bg","selected","Button","styled","button","KeyWrapper","props","childrens","React","Children","toArray","map","el","cloneElement","Grid","length","article","DisplayFormatter","useState","scale","setScale","displayRef","useRef","useEffect","current","node","actualScale","parentNode","offsetWidth","Wrapper","ref","div","Display","parseFloat","toLocaleString","useGrouping","maximumFractionDigits","Background","Filter","section","BackgroundImg","useCalculate","displayValue","setDisplayValue","calculatedValue","setCalculatedValue","awaitingOperator","setAwaitingOperator","operator","setOperator","clearAll","useCallback","inputDigit","digit","String","newVal","inputDot","includes","inputOperation","nextOperator","inputValue","newValue","first","second","decimalSubstr","firstSubstr","split","secondSubstr","firstLength","secondLength","roundInt","Number","repeat","Error","calculateValue","handleKeyDown","e","key","test","window","addEventListener","removeEventListener","App","FlexWrapper","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c92fa2a7.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\nfunction Key ({ children, onClick, span, bg, selected }) {\r\n  return (\r\n    <Button\r\n      onClick={() => onClick(children)}\r\n      selected={selected ? 1 : 0}\r\n      span={span ? 1 : 0}\r\n      bg={bg ? 1 : 0}\r\n    >\r\n      {children}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default Key;\r\n\r\nconst Button = styled.button`\r\n  height: ${({span}) => span ? \"300px\" : \"150px\"};\r\n  background-color: ${({ bg, selected }) => bg\r\n    ? selected\r\n      ? \"rgba(9, 128, 61, 0.75)\"\r\n      : \"rgba(65, 181, 114, 0.75)\"\r\n    : selected\r\n      ? \"rgba(10, 48, 26, 0.75)\"\r\n      : \"rgba(3, 19, 10, 0.75)\"\r\n  };\r\n  color: white;\r\n  font-size: 2em;\r\n  outline: none;\r\n  border: none;\r\n\r\n  &:hover {\r\n    background-color: #075c2c;\r\n    cursor: pointer;\r\n  }\r\n\r\n  @media screen and (max-width: 610px) {\r\n    height: ${({span}) => span ? \"160px\" : \"80px\"};\r\n  }\r\n`;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nfunction KeyWrapper ({ children, ...props }) {\r\n  const childrens = React.Children\r\n    .toArray(children)\r\n    .map(el => (\r\n      React.cloneElement(\r\n        el,\r\n        {...props, ...el.props}\r\n      )\r\n    ));\r\n  return (\r\n    <Grid length={childrens.length}>\r\n      {childrens}\r\n    </Grid>\r\n  )\r\n}\r\n\r\nexport default KeyWrapper;\r\n\r\nconst Grid = styled.article`\r\n  display: grid;\r\n  grid-template-columns: ${({ length }) => `repeat(${length % 4 === 0 ? length/4 : 1}, 150px)`};\r\n\r\n  @media screen and (max-width: 610px) {\r\n    grid-template-columns: ${({ length }) => `repeat(${length % 4 === 0 ? length/4 : 1}, 80px)`};\r\n  }\r\n`;","import { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\n// Format the display value text so that it fits within the parent's confines\r\nconst DisplayFormatter = ({ children }) => {\r\n  const [scale, setScale] = useState(1);\r\n  const displayRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    if (displayRef && displayRef.current) {\r\n      const node = displayRef.current;\r\n      const parentNode = node.parentNode;\r\n\r\n      const availableWidth = parentNode.offsetWidth;\r\n      const actualWidth = node.offsetWidth;\r\n      const actualScale = availableWidth / actualWidth;\r\n\r\n      if (scale !== actualScale) {\r\n        if (actualScale < 1) {\r\n          setScale(actualScale);\r\n        }\r\n        if (scale < 1) {\r\n          setScale(1)\r\n        }\r\n      }\r\n    }\r\n  }, [scale, children]);\r\n\r\n  return (\r\n    <Wrapper\r\n      ref={displayRef}\r\n      scale={scale}\r\n    >\r\n      {children}\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default DisplayFormatter;\r\n\r\nconst Wrapper = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  color: white;\r\n  font-size: 9em;\r\n  bottom: 16px;\r\n  padding: 0 32px;\r\n  transform-origin: right;\r\n  display: inline-block;\r\n  ${({ scale }) => `transform: scale(${scale}, ${scale})`};\r\n\r\n  @media screen and (max-width: 610px) {\r\n    font-size: 6em;\r\n  }\r\n`;","import styled from \"styled-components\";\r\nimport DisplayFormatter from \"./DisplayFormatter\";\r\n\r\nconst Display = ({ children }) => {\r\n  return (\r\n    <Wrapper>\r\n      <DisplayFormatter>\r\n        {parseFloat(children).toLocaleString('en-US', {\r\n          useGrouping: true,\r\n          maximumFractionDigits: 6\r\n        })}\r\n      </DisplayFormatter>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Display;\r\n\r\nconst Wrapper = styled.div`\r\n  height: 320px;\r\n  background: transparent;\r\n  border-bottom: 1px solid white;\r\n  position: relative;\r\n\r\n  @media screen and (max-width: 610px) {\r\n    height: 160px;\r\n  }\r\n`;","export default __webpack_public_path__ + \"static/media/pexels-photo-192136.f5afd4c2.jpeg\";","import styled from 'styled-components';\r\n\r\nimport BackgroundImg from \"../assets/pexels-photo-192136.jpeg\";\r\n\r\nfunction Background ({ children }) {\r\n  return (\r\n    <Wrapper>\r\n      {children}\r\n      <Filter />\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Background;\r\n\r\nconst Wrapper = styled.section`\r\n  margin: 0 auto;\r\n  background-image: url(${BackgroundImg});\r\n  background-size: cover;\r\n  position: relative;\r\n  box-shadow: -3px 1px 16px 4px rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst Filter = styled.div`\r\n  z-index: 1;\r\n  top: 0;\r\n  right: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  mix-blend-mode: darken;\r\n  background-color: #0f1b55;\r\n  opacity: 0.75;\r\n  position: absolute;\r\n`;","import { useCallback, useEffect, useState } from \"react\";\r\nimport calculateValue from '../utils/calculateValue';\r\n\r\n// Could also have been put in a reducer\r\nfunction useCalculate () {\r\n  const [displayValue, setDisplayValue] = useState(\"0\");\r\n  const [calculatedValue, setCalculatedValue] = useState(0);\r\n  const [awaitingOperator, setAwaitingOperator] = useState(false);\r\n  const [operator, setOperator] = useState(\"\");\r\n\r\n  const clearAll = useCallback(() => {\r\n    setDisplayValue(\"0\");\r\n    setCalculatedValue(null);\r\n    setAwaitingOperator(false);\r\n    setOperator(\"\");\r\n  }, [])\r\n\r\n  const inputDigit = useCallback((digit) => {\r\n    if (awaitingOperator) {\r\n      setDisplayValue(String(digit));\r\n      setAwaitingOperator(false);\r\n      return;\r\n    }\r\n    const newVal = displayValue === \"0\" ? String(digit) : displayValue + digit\r\n    setDisplayValue(newVal);\r\n  }, [displayValue, awaitingOperator])\r\n\r\n  const inputDot = useCallback(() => {\r\n    if (awaitingOperator) {\r\n      setDisplayValue(\"0.\");\r\n      setAwaitingOperator(false);\r\n      return;\r\n    }\r\n    if (displayValue.includes(\".\")) {\r\n      return;\r\n    }\r\n    setDisplayValue(displayValue === \"0\" || displayValue === \"\" ? \"0.\" : displayValue + \".\");\r\n  }, [displayValue, awaitingOperator])\r\n\r\n  const inputOperation = useCallback((nextOperator) => {\r\n    const inputValue = parseFloat(displayValue);\r\n\r\n    if (!calculatedValue) {\r\n      setCalculatedValue(inputValue)\r\n    } else if (operator) {\r\n      const currentVal = calculatedValue || 0;\r\n      const newValue = calculateValue(operator, currentVal, inputValue);\r\n\r\n      setCalculatedValue(newValue);\r\n      setDisplayValue(String(newValue));\r\n    }\r\n\r\n    setAwaitingOperator(true);\r\n    setOperator(nextOperator);\r\n  }, [calculatedValue, displayValue, operator])\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      let { key } = e;\r\n\r\n      if ((/\\d/).test(key)) {\r\n        inputDigit(key);\r\n      }\r\n      else if (key === \".\" || key === \",\") {\r\n        inputDot();\r\n      }\r\n      else if (key === \"Enter\") {\r\n        inputOperation(\"=\");\r\n      }\r\n      else if ((/[+-=]/).test(key)) {\r\n        inputOperation(key);\r\n      }\r\n      else if (key === \"Delete\") {\r\n        clearAll();\r\n      }\r\n    }\r\n    window.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    }\r\n  }, [displayValue, inputDigit, inputDot, inputOperation, clearAll]);\r\n\r\n  return {\r\n    displayValue,\r\n    operator,\r\n    awaitingOperator,\r\n    inputDigit,\r\n    inputDot,\r\n    inputOperation,\r\n    clearAll\r\n  };\r\n}\r\n\r\nexport default useCalculate;","// To get over the floating point issue, i round all nums to whole numbers until the calculation is complete.\r\n// With mutliplication or division, all that would need doing is revisiting the decimal places length\r\nexport default function calculateValue (operator, first, second) {\r\n  let decimalSubstr = 0;\r\n  if (String(first).includes(\".\") || String(second).includes(\".\")) {\r\n    const firstSubstr = String(first).split(\".\")[1];\r\n    const secondSubstr = String(second).split(\".\")[1];\r\n\r\n    const firstLength = (!!firstSubstr && firstSubstr.length) || 0;\r\n    const secondLength = (!!secondSubstr && secondSubstr.length) || 0;\r\n    decimalSubstr = firstLength > secondLength ? firstLength : secondLength;\r\n  }\r\n  const roundInt = Number(`1${\"0\".repeat(decimalSubstr)}`);\r\n\r\n  switch(operator) {\r\n    case \"+\":\r\n      return ((first * roundInt) + (second * roundInt)) / roundInt;\r\n    case \"-\":\r\n      return ((first * roundInt) - (second * roundInt)) / roundInt;\r\n    case \"=\":\r\n      return second;\r\n    default:\r\n      return new Error('invalid operation');\r\n  }\r\n}","import styled from 'styled-components';\n\nimport Key from './components/Key';\nimport KeyWrapper from './components/KeyWrapper';\nimport Display from './components/Display';\nimport Background from './components/Background';\n\nimport useCalculate from './hooks/useCalculate';\n\nfunction App() {\n  const {\n    displayValue,\n    operator,\n    awaitingOperator,\n    inputDigit,\n    inputDot,\n    inputOperation,\n    clearAll,\n  } = useCalculate();\n\n  return (\n    <Background>\n      <Wrapper>\n        <Display>{displayValue}</Display>\n        <FlexWrapper>\n          <KeyWrapper onClick={inputDigit}>\n            <Key>7</Key>\n            <Key>8</Key>\n            <Key>9</Key>\n            <Key>4</Key>\n            <Key>5</Key>\n            <Key>6</Key>\n            <Key>1</Key>\n            <Key>2</Key>\n            <Key>3</Key>\n            <Key onClick={clearAll}>AC</Key>\n            <Key onClick={() => inputDigit(0)}>0</Key>\n            <Key onClick={inputDot}>.</Key>\n          </KeyWrapper>\n          <KeyWrapper onClick={inputOperation}>\n            <Key selected={operator === \"+\" && awaitingOperator}>+</Key>\n            <Key selected={operator === \"-\" && awaitingOperator}>-</Key>\n            <Key span bg selected={operator === \"=\" && awaitingOperator}>=</Key>\n          </KeyWrapper>\n        </FlexWrapper>\n      </Wrapper>\n    </Background>\n  );\n}\n\nexport default App;\n\nconst FlexWrapper = styled.article`\n  display: flex;\n  flex-direction: row;\n`;\n\nconst Wrapper = styled.div`\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  position: relative;\n`;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}